---
import { SITE_TITLE } from '../consts';
import ThemeToggle from './ThemeToggle.astro';
---

<nav class="navbar" role="navigation" aria-label="main navigation">
	<div class="container">
		<div class="navbar-brand">
			<a class="navbar-item" href="/">
				{SITE_TITLE}
			</a>
			<a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
			</a>
		</div>

		<div id="navbarMenu" class="navbar-menu">
			<div class="navbar-end">
				<a class="navbar-item" href="/">Blog</a>
				<a class="navbar-item" href="/about">About</a>
				<div class="navbar-item">
					<ThemeToggle />
				</div>
			</div>
		</div>
	</div>
</nav>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
		$navbarBurgers.forEach(el => {
			el.addEventListener('click', () => {
				const target = el.dataset.target;
				const $target = document.getElementById(target);
				if ($target) {
					el.classList.toggle('is-active');
					$target.classList.toggle('is-active');
				}
			});
		});
	});
</script>

<style>
	.navbar-burger {
		color: var(--neon-blue);
	}
	.navbar-burger span {
		background-color: currentColor;
	}
	.navbar-burger:hover {
		color: var(--neon-pink);
	}
	@media screen and (max-width: 1023px) {
		.navbar-menu {
			background-color: var(--dark-bg);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
			transition: background-color 0.3s ease;
		}
		[data-theme="light"] .navbar-menu {
			background-color: var(--light-bg);
			box-shadow: 0 8px 16px var(--light-shadow);
		}
		.navbar-menu.is-active {
			display: block;
		}
	}
</style>
